!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CM=e():t.CM=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}t.r(e),t.d(e,{CSSToggle:()=>i,HSLToHex:()=>tt,RGBToHSL:()=>X,addAnimation:()=>p,addFiltersToDefs:()=>z,applyFilter:()=>J,constrain:()=>v,create:()=>b,createAnimation:()=>y,createFilter:()=>g,createNS:()=>s,default:()=>nt,emit:()=>S,filterFromDictionary:()=>$,floatToHexDigit:()=>Y,ftos:()=>w,generateAnimate:()=>V,generateFeColorMatrix:()=>R,generateFeComponentTransfer:()=>U,generateSVGFilter:()=>G,getTranslate:()=>T,hexDigitToFloat:()=>Q,hexToInt:()=>A,hexToRGB:()=>W,intToHex:()=>E,interpolate:()=>j,map:()=>C,mtof:()=>F,mtos:()=>x,populate:()=>O,rot:()=>k,set:()=>u,setInTree:()=>M,setNS:()=>N,setSvgTextClass:()=>K,stof:()=>D,stom:()=>H,toggleFullscreen:()=>P,transposeForPlayer:()=>B,v:()=>L,within:()=>_});var i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"hc--light";r(this,t),this.element=e,this.on=n,this.attack=o,this.release=i,this.effectClass=a}var e,n;return e=t,(n=[{key:"toggle",value:function(){this.on=!this.on;var t=this.element,e=this.on,n=this.attack,r=this.release,o=this.effectClass;t.style.transition="fill ".concat(e?n:r,"s ease"),t.classList[e?"add":"remove"](o)}},{key:"trigger",value:function(t){this.on=t;var e=this.element,n=this.attack,r=this.release,o=this.effectClass;e.style.transition="fill ".concat(t?n:r,"s ease"),e.classList[t?"add":"remove"](o)}},{key:"attack",set:function(t){this._attack=t}},{key:"release",set:function(t){this._release=t}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u=function(t,e){Object.entries(e).forEach((function(e){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(n,r)||a(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];switch(i){case"custom":Object.entries(u).forEach((function(e){return t.setAttribute.apply(t,function(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}));break;case"style":Object.entries(u).forEach((function(e){return t.style[e[0]]=e[1]}));break;case"dataset":Object.entries(u).forEach((function(e){return t.dataset[e[0]]=e[1]}));break;default:t[i]=u}}))},l=l||"http://www.w3.org/2000/svg",s=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=n.createElementNS(l,t);return u(r,e),r};function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var y=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;o||"undefined"==typeof document||(o=document);var i={custom:{attributeName:"fill",begin:"indefinite",repeatCount:"1",dur:"1s",fill:"freeze",keyTimes:"0; 1",values:"red; blue"}};"object"==m(arguments[0])&&(Object.assign(i.custom,arguments[0].custom),"dur"in i.custom||(i.custom.dur="".concat(arguments[0].duration,"s")),e=arguments[0].events,n=arguments[0].duration,arguments.length>1&&(o=arguments[1]));var a="",c="";if(!Array.isArray(e)){var u=[];Object.keys(e).forEach((function(t){u.push([t,e[t]])})),(e=u).sort((function(t,e){return t[0]-e[0]}))}e.forEach((function(t,n){var r=f(t,2),o=r[0],i=r[1];parseFloat(o)%1==0&&(o+=".00");var u=n<Object.keys(e).length-1?"; ":"";c+="".concat(o).concat(u),a+="".concat(i).concat(u)})),i.custom.values=a,i.custom.keyTimes=c;var l=s("translate"==t?"animateTransform":"animate",i,o);return Object.assign(l,r)};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}var p=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5?arguments[5]:void 0;i||"undefined"==typeof document||(i=document);var a,c="object"==h(t)?t:i.getElementById(t);if("object"==h(arguments[1])){var u={custom:{}};Object.assign(u,arguments[1]),arguments.length>2&&(i=arguments[2]),"id"in u.custom||(u.custom.id="".concat(c.id,"_").concat(e)),a=y(u,i)}else"id"in o||(o.id="".concat(c.id,"_").concat(e)),a=y(e,n,r,o,i);return c.appendChild(a),a},v=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(t=r?Math.floor(t):t)>n?n:t<e?e:t},b=function(t,e,n){n||"undefined"==typeof document||(n=document);var r=n.createElement(t);return u(r,e),r},g=function(t,e){var n={filter:s("filter",{id:t,custom:{filterUnits:"objectBoundingBox",x:"0",y:"0",width:"100%",height:"100%"}}),animation:{},update:{}};return"string"==typeof e&&(e=[e]),e.forEach((function(r){n[r]=s("feColorMatrix",{id:"".concat(t,"_").concat(r),custom:{type:e,in:"SourceGraphic",values:0}}),n.filter.appendChild(n[r]),n.animation[r]=y("values",[[0,0],[1,1]],.1),n[r].appendChild(n.animation[r]),n.update[r]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"unspecified";"unspecified"==o&&(o=n[r].values.animVal.getItem("value").value),"unspecified"!=e&&n.animation[r].setAttribute("dur","".concat(e,"s")),n.animation[r].setAttribute("values","".concat(o,";").concat(t)),console.log(n.animation[r]),n.animation[r].beginElement()}})),n},S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};document.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0,composed:!1}))},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return sym=Tone.Frequency(t).transpose(e),Tone.Frequency(t).toNote()},T=function(t){var e=getComputedStyle(t).transform,n="none"==e?{e:0,f:0}:new DOMMatrix(e);return{x:n.e,y:n.f}},A=function(t){for(var e=[0,0],n=0;n<2;n++)e[n]=t.charCodeAt(n),e[n]-=e[n]>=65?55:48;return e[0]*=16,e[0]+e[1]},j=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(1-n)*t+n*e;return r?Math.floor(o):o},E=function(t){var e=[0,0];for(var n in e[0]=Math.floor(t/16),e[1]=t%16,e)e[n]=e[n]>9?String.fromCharCode(e[n]+55):e[n];return"".concat(e[0]).concat(e[1])},C=function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return t-=e,t*=o-r,t/=n-e,t+=e,t=a?Math.floor(t):t,i?v(t,r,o):t},F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=Tone.Frequency(t,"midi").transpose(e),Tone.Frequency(t,"midi").toFrequency()},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=Tone.Frequency(t,"midi").transpose(e),Tone.Frequency(t,"midi").toNote()},O=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"option";e.forEach((function(e){t.appendChild(b(r,{value:e,innerHTML:e})),0!=n&&(t.value=n)}))},k=function(t,e){var n=[t.slice(e),t.slice(0,e)];return n[0].concat(n[1])},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this;"string"==typeof t&&(t=t.split("_"));var r=n;t.forEach((function(t,e,n){e<n.length-1&&(r=r[t])})),console.log(r,e),r[t[t.length-1]]=e};function q(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var N=function(t,e){Object.entries(e).forEach((function(e){var n,r,o=(r=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(n,r)||q(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];switch(i){case"custom":Object.entries(a).forEach((function(e){t.setAttributeNS.apply(t,[xmlns].concat(function(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)))}));break;case"style":Object.entries(a).forEach((function(e){return t.style[e[0]]=e[1]}));break;default:t[i]=a}}))},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=Tone.Frequency(t).transpose(e),Tone.Frequency(t).toMidi()},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=Tone.Frequency(t).transpose(e),Tone.Frequency(t).toFrequency()},P=function(){return document.fullscreenElement?(document.exitFullscreen(),!0):document.webkitFullscreenElement?(document.webkitExitFullscreen(),!0):document.documentElement.requestFullscreen?(document.documentElement.requestFullscreen(),!0):document.documentElement.webkitRequestFullscreen?(document.documentElement.webkitRequestFullscreen(),!0):(window.top!=window.self?window.top.location.href=window.location.href:window.history.back(),!1)},B=function(t,e){return"string"==typeof t?t=D(t):"number"==typeof t&&(t=F(t)),"string"==typeof e?e=D(e):"number"==typeof e&&(e=F(e)),t/e},L=function(t){return Tone.gainToDb(t)},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,right:0,top:0,bottom:0},r={left:t>=n.left,right:t<=n.right,top:e>=n.top,bottom:e<=n.bottom},o=[];return Object.keys(n).forEach((function(t){t in r&&o.push(r[t])})),o.every((function(t){return!0===t}))};function G(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","filter");return n.setAttribute("id",t),n.setAttribute("filterUnits",e),n}function R(t,e,n){var r=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");return r.setAttribute("id",t),r.setAttribute("type",e),r.setAttribute("values",n),r}function U(t){var e=document.createElementNS("http://www.w3.org/2000/svg","feComponentTransfer");return e.setAttribute("id",t),e}function V(t){var e=document.createElementNS("http://www.w3.org/2000/svg","animate");return Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])})),e}function $(t){var e=G(t.id,t.filterUnits),n=U("feComponentTransfer1");return e.appendChild(n),Object.keys(t.components).forEach((function(n){var r=t.components[n],o=R(r.id,r.type,r.values);e.appendChild(o)})),Object.keys(t.animations).length>0&&Object.keys(t.animations).forEach((function(n){var r=V(t.animations[n]);e.appendChild(r)})),e}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector("svg");Object.keys(t).forEach((function(e){var n=$(t[e]);if(!document.querySelector("svg defs")){var r=document.createElementNS("http://www.w3.org/2000/svg","defs");document.querySelector("svg").insertBefore(r,document.querySelector("svg").firstChild)}document.querySelector("svg defs").appendChild(n)}));var n=e.cloneNode(!0);e.parentNode.replaceChild(n,e)}function J(t,e){var n=e.cloneNode(!0);n.setAttribute("filter","url(#".concat(t.id,")")),e.parentNode.replaceChild(n,e),document.querySelector("#".concat(t.id)).querySelectorAll("animate").forEach((function(t){t.setAttribute("href","#".concat(t.getAttribute("href").slice(1)).concat(e.id)),t.setAttribute("id","".concat(t.getAttribute("id")).concat(e.id))}))}var K=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selected";Array.from(t.children).filter((function(t){return"svg"==t.tagName})).forEach((function(t){t.querySelectorAll("text").forEach((function(t){t.classList[e](n)}))}))};function Q(t){return parseInt(t,16)/255}function W(t){return[Q(t.slice(1,3)),Q(t.slice(3,5)),Q(t.slice(5,7))]}function X(t,e,n){var r,o,i=Math.max(t,e,n),a=Math.min(t,e,n),c=(i+a)/2;if(i==a)r=o=0;else{var u=i-a;switch(o=c<.5?u/(i+a):u/(2-i-a),i){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return[r=Math.round(360*r),o=Math.round(100*o),c=Math.round(100*c)]}function Y(t){var e=Math.round(255*t).toString(16);return 1===e.length?"0".concat(e):e}var Z=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t};function tt(t,e,n){var r;if(t/=360,n/=100,0==(e/=100))r=[n,n,n];else{var o=n<.5?n*(1+e):n+e-n*e,i=2*n-o;r=[Z(i,o,t+1/3),Z(i,o,t),Z(i,o,t-1/3)]}return r=r.map((function(t){return Y(t)})),"#".concat(r.join(""))}console.log("running cm-toolbox");var et={CSSToggle:i,addAnimation:p,constrain:v,create:b,createFilter:g,createAnimation:y,createNS:s,emit:S,ftos:w,getTranslate:T,hexToInt:A,interpolate:j,intToHex:E,map:C,mtof:F,mtos:x,populate:O,rot:k,set:u,setInTree:M,setNS:N,stom:H,stof:D,toggleFullscreen:P,transposeForPlayer:B,v:L,within:_,generateSVGFilter:G,generateFeColorMatrix:R,generateFeComponentTransfer:U,generateAnimate:V,addFiltersToDefs:z,filterFromDictionary:$,applyFilter:J,setSvgTextClass:K,hexToRGB:W,RGBToHSL:X,HSLToHex:tt,floatToHexDigit:Y,hexDigitToFloat:Q};"undefined"!=typeof module&&module.exports?(console.log("cm-toolbox running in node...success!"),module.exports=et):"undefined"!=typeof globalThis?globalThis.CM=et:"undefined"!=typeof window&&(window.CM=et);const nt=et;return e})()));